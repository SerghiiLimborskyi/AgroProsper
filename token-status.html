<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>üõ°Ô∏è –°—Ç–∞—Ç—É—Å —Ç–æ–∫–µ–Ω—ñ–≤</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <link rel="stylesheet" href="../style.css" />
</head>
<body>
  <div id="landing-container">
    <h1>üõ°Ô∏è –°—Ç–∞—Ç—É—Å —Ç–æ–∫–µ–Ω—ñ–≤</h1>

    <div id="status-block">
      <p>üîÑ –û—Å—Ç–∞–Ω–Ω—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞: <span id="last-scan">‚è≥</span></p>
      <p>üß™ –í–∏—è–≤–ª–µ–Ω–æ —Ç–æ–∫–µ–Ω—ñ–≤: <span id="found">‚è≥</span></p>
      <p>üìÅ –ü–µ—Ä–µ–≤—ñ—Ä–µ–Ω–æ —Ñ–∞–π–ª—ñ–≤: <span id="files">‚è≥</span></p>
    </div>

    <button id="scan-btn">üîç –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É</button>
    <p id="scan-result" style="margin-top: 12px;"></p>
  </div>

  <script>
    const tg = window.Telegram.WebApp;
    tg.expand();

    function loadStatus() {
      fetch('https://your-domain.com/api/token-status')
        .then(res => res.json())
        .then(data => {
          document.getElementById('last-scan').textContent = new Date(data.lastScan).toLocaleString();
          document.getElementById('found').textContent = data.tokensFound;
          document.getElementById('files').textContent = data.filesScanned;
        })
        .catch(() => {
          document.getElementById('status-block').textContent = '‚ùå –ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ —Å—Ç–∞—Ç—É—Å—É.';
        });
    }

    document.getElementById('scan-btn').onclick = async () => {
      document.getElementById('scan-result').textContent = '‚è≥ –°–∫–∞–Ω—É–≤–∞–Ω–Ω—è...';
      const res = await fetch('https://your-domain.com/api/scan-now');
      const result = await res.json();
      document.getElementById('scan-result').textContent = result.success
        ? '‚úÖ –°–∫–∞–Ω—É–≤–∞–Ω–Ω—è –∑–∞–≤–µ—Ä—à–µ–Ω–æ. –û–Ω–æ–≤–ª–µ–Ω–æ —Å—Ç–∞—Ç—É—Å.'
        : '‚ùå –ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ —Å–∫–∞–Ω—É–≤–∞–Ω–Ω—ñ.';
      loadStatus();
    };

    loadStatus();
  </script>
</body>
</html>
