<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <title>DAO –ì–æ–ª–æ—Å—É–≤–∞–Ω–Ω—è</title>
  <link rel="stylesheet" href="../style.css" />
  <script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
</head>
<body>
  <h1>üó≥Ô∏è –ì–æ–ª–æ—Å—É–≤–∞–Ω–Ω—è DAO</h1>
  <button onclick="vote()">‚úÖ –ü—Ä–æ–≥–æ–ª–æ—Å—É–≤–∞—Ç–∏</button>
  <p id="status">–°—Ç–∞—Ç—É—Å: ...</p>

  <script>
    const contractAddress = '0x1234567890abcdef1234567890abcdef12345678'; // –ø—Ä–∏–∫–ª–∞–¥
    const abi = [
      {
        "constant": false,
        "inputs": [],
        "name": "vote",
        "outputs": [],
        "type": "function"
      }
    ];

    async function vote() {
      if (window.ethereum) {
        const web3 = new Web3(window.ethereum);
        await ethereum.request({ method: 'eth_requestAccounts' });
        const contract = new web3.eth.Contract(abi, contractAddress);
        const accounts = await web3.eth.getAccounts();
        try {
          await contract.methods.vote().send({ from: accounts[0] });
          document.getElementById('status').innerText = '–°—Ç–∞—Ç—É—Å: –ì–æ–ª–æ—Å –ø—Ä–∏–π–Ω—è—Ç–æ';
        } catch (err) {
          document.getElementById('status').innerText = '–°—Ç–∞—Ç—É—Å: –ü–æ–º–∏–ª–∫–∞ –≥–æ–ª–æ—Å—É–≤–∞–Ω–Ω—è';
        }
      } else {
        alert('–í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å MetaMask');
      }
    }
  </script>
</body>
</html>
