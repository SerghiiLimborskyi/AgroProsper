<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="../public/style.css" />
<title>AgroProsper ‚Äî DAO –ê–≥–µ–Ω—Ç –Ω–∞ –±—ñ—Ä–∂—ñ</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #f9f9f9;
      padding: 2rem;
    }
    .agent-form {
      background: #fff;
      padding: 2rem;
      border-radius: 12px;
      max-width: 700px;
      margin: auto;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    .agent-form h2 {
      text-align: center;
      color: #2e7d32;
      margin-bottom: 1.5rem;
    }
    .agent-form label {
      display: block;
      margin-top: 1rem;
      font-weight: bold;
    }
    .agent-form input,
    .agent-form select,
    .agent-form textarea {
      width: 100%;
      padding: 0.5rem;
      margin-top: 0.3rem;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: 1rem;
    }
    .agent-form button {
      margin-top: 1.5rem;
      background-color: #2e7d32;
      color: white;
      padding: 0.7rem 1.2rem;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 1rem;
    }
    .agent-form button:hover {
      background-color: #1b5e20;
    }
  </style>
</head>
<body>
  <section class="agent-form">
    <h2>üì¶ –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è AgroProsper —è–∫ DAO –ê–≥–µ–Ω—Ç</h2>
    <form id="agentRegistration">
      <label for="platform">üåê –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –∞–±–æ –±—ñ—Ä–∂–∞:</label>
      <input type="text" id="platform" name="platform" placeholder="Upwork, Fiverr, Amazon, OLX..." required />

      <label for="profileName">üë§ –ù–∞–∑–≤–∞ –ø—Ä–æ—Ñ—ñ–ª—é:</label>
      <input type="text" id="profileName" name="profileName" value="AgroProsper DAO Agent" required />

      <label for="accountType">üîñ –¢–∏–ø –∞–∫–∞—É–Ω—Ç–∞:</label>
      <select id="accountType" name="accountType">
        <option value="freelancer">–§—Ä—ñ–ª–∞–Ω—Å–µ—Ä</option>
        <option value="agent">–†–µ–∫–ª–∞–º–Ω–∏–π –∞–≥–µ–Ω—Ç</option>
        <option value="dao">DAO-–ø—Ä–µ–¥—Å—Ç–∞–≤–Ω–∏–∫</option>
        <h2>–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞</h2>
<select id="role">
  <option value="starter">Starter</option>
  <option value="farmer">Farmer</option>
  <option value="trader">Trader</option>
</select>
<button onclick="registerUser(document.getElementById('role').value)">–ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è</button>

      </select>
      <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.min.js"></script>
<script>
  
  const userRegistryAddress = "0x..."; // –∑–∞–º—ñ–Ω–∏ –Ω–∞ —Å–≤–æ—é –∞–¥—Ä–µ—Å—É –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É
  const userRegistryABI = [ /* –≤—Å—Ç–∞–≤ —Å—é–¥–∏ ABI –∑ UserRegistry.sol */ ];

  async function registerUser(role) {
    if (!window.ethereum) {
      alert("–ë—É–¥—å –ª–∞—Å–∫–∞, –≤—Å—Ç–∞–Ω–æ–≤–∏ Metamask");
      return;
    }

    await ethereum.request({ method: "eth_requestAccounts" });
    const provider = new ethers.providers.Web3Provider(window.ethereum);
    const signer = provider.getSigner();
    const contract = new ethers.Contract(userRegistryAddress, userRegistryABI, signer);

    try {
      const tx = await contract.registerUser(role); // –∞–±–æ —Ç–≤–æ—è —Ñ—É–Ω–∫—Ü—ñ—è
      await tx.wait();
      alert("–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è —É—Å–ø—ñ—à–Ω–∞!");
    } catch (err) {
      console.error("–ü–æ–º–∏–ª–∫–∞:", err);
      alert("–ù–µ –≤–¥–∞–ª–æ—Å—è –∑–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è");
    }
  }
</script>

      <label for="referralLink">üîó –†–µ–∫–ª–∞–º–Ω–µ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ —Å–∞–π—Ç AgroProsper:</label>
      <input type="url" id="referralLink" name="referralLink" value="https://serghiilimborskyi.github.io/AgroProsper/" required />

      <label for="dealType">üìÑ –¢–∏–ø —É–≥–æ–¥–∏:</label>
      <select id="dealType" name="dealType">
        <option value="referral">–†–µ–∫–ª–∞–º–Ω–∞ —É–≥–æ–¥–∞ (10% –∑ –ø—Ä–æ–¥–∞–∂—É)</option>
        <option value="contract">–ö–æ–Ω—Ç—Ä–∞–∫—Ç –º—ñ–∂ –ø—Ä–æ–¥–∞–≤—Ü–µ–º —ñ –ø–æ–∫—É–ø—Ü–µ–º</option>
      </select>

      <label for="notes">üßæ –ö–æ–º–µ–Ω—Ç–∞—Ä / —É–º–æ–≤–∏ / –Ω–æ–º–µ—Ä —Ä–∞—Ö—É–Ω–∫—É:</label>
      <textarea id="notes" name="notes" rows="4" placeholder="–ù–æ–º–µ—Ä —Ä–∞—Ö—É–Ω–∫—É –¥–ª—è –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ –∞–≥—Ä–∞—Ä—ñ—è, –∞–±–æ –∑–∞–ª–∏—à–∏—Ç–∏ –ø–æ—Ä–æ–∂–Ω—ñ–º –¥–ª—è –±–ª–∞–≥–æ–¥—ñ–π–Ω–æ—Å—Ç—ñ"></textarea>

      <button type="submit">üöÄ –ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏ DAO –ê–≥–µ–Ω—Ç</button>
    </form>
  </section>
</body>
</html>
