<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <title>Admin Dashboard ‚Äî AgroProsper DAO</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="styles/admin.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <div id="menuContainer"></div>
<script>
  fetch("menu.html")
    .then(res => res.text())
    .then(html => document.getElementById("menuContainer").innerHTML = html);
</script>
  <div id="footerContainer"></div>
<script>
  fetch("footer.html")
    .then(res => res.text())
    .then(html => document.getElementById("footerContainer").innerHTML = html);
</script>
</head>
<body>
  <header>
    <h1>üõ†Ô∏è –ü–∞–Ω–µ–ª—å –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞ DAO</h1>
    <p>CID: <strong id="adminCID">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</strong></p>
  </header>

  <section>
    <h2>üìä DAO-–≥—Ä–∞—Ñ—ñ–∫–∏</h2>
    <canvas id="tokenChart" width="400" height="200"></canvas>
    <canvas id="questChart" width="400" height="200"></canvas>
  </section>

  <section>
    <h2>üí∞ AGT-—Ç–æ–∫–µ–Ω–∏</h2>
    <p>–ë–∞–ª–∞–Ω—Å DAO: <strong id="agtBalance">AGT: 0</strong></p>
    <button onclick="simulateTransfer()">üîÑ –°–∏–º—É–ª—é–≤–∞—Ç–∏ –ø–µ—Ä–µ–∫–∞–∑</button>
  </section>

  <section>
    <h2>üìú –õ–æ–≥–∏ –¥—ñ–π</h2>
    <div id="adminLogTable">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ª–æ–≥—ñ–≤...</div>
  </section>

  <section>
    <h2>üîß –î—ñ—ó –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h2>
    <button onclick="updateCID('Farmer')">üîÑ –û–Ω–æ–≤–∏—Ç–∏ CID –¥–æ Farmer</button>
    <button onclick="mintBadgeSelf(1)">üèÖ –í–∏–¥–∞—Ç–∏ –±–µ–π–¥–∂ Farmer</button>
    <button class="btn" onclick="openAgentMonitor()">üìä –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –∞–≥–µ–Ω—Ç—ñ–≤</button>
  </section>

  <script src="scripts/admin-logs.js" defer></script>
  <script src="scripts/questNFT.js" defer></script>
  <script>
    // CID-–≤–∏–≤—ñ–¥
    const cid = localStorage.getItem("cid") || "0xADMIN-XXXX";
    document.getElementById("adminCID").textContent = cid;

    // DAO-–≥—Ä–∞—Ñ—ñ–∫ —Ç–æ–∫–µ–Ω—ñ–≤
    new Chart(document.getElementById("tokenChart"), {
      type: "doughnut",
      data: {
        labels: ["–§–µ—Ä–º–µ—Ä–∏", "–¢—Ä–µ–π–¥–µ—Ä–∏", "–ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∏"],
        datasets: [{
          data: [120, 80, 20],
          backgroundColor: ["#00ff99", "#ffcc00", "#ff3366"]
        }]
      }
    });

    // DAO-–≥—Ä–∞—Ñ—ñ–∫ –∫–≤–µ—Å—Ç—ñ–≤
    new Chart(document.getElementById("questChart"), {
      type: "bar",
      data: {
        labels: ["–°–æ–ª–æ–¥–∫–∏–π –≤–∏–±—ñ—Ä", "–ü–µ—á–µ—Ä–∞ –ö–æ—Ä—ñ–Ω–Ω—è", "–ü–∞–≤—É—Ç–∏–Ω–∞ –¥–æ–±—Ä–∞"],
        datasets: [{
          label: "–í–∏–∫–æ–Ω–∞–Ω–æ",
          data: [42, 35, 27],
          backgroundColor: "#00ff99"
        }]
      }
    });

    // –ë–∞–ª–∞–Ω—Å —Ç–æ–∫–µ–Ω—ñ–≤
    document.getElementById("agtBalance").textContent = "AGT: 1000";

    // –°–∏–º—É–ª—è—Ü—ñ—è –ø–µ—Ä–µ–∫–∞–∑—É
    function simulateTransfer() {
      alert("üí∏ –ü–µ—Ä–µ–∫–∞–∑ 50 AGT —É—Å–ø—ñ—à–Ω–æ —Å–∏–º—É–ª—å–æ–≤–∞–Ω–æ!");
    }

    // CID-–æ–Ω–æ–≤–ª–µ–Ω–Ω—è
    function updateCID(newRole) {
      localStorage.setItem("agentLevel", newRole);
      alert(`CID –æ–Ω–æ–≤–ª–µ–Ω–æ –¥–æ: ${newRole}`);
    }
  </script>
</body>
</html>
