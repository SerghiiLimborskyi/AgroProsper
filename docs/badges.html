<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <title>üèÖ –ì–∞–ª–µ—Ä–µ—è –±–µ–π–¥–∂—ñ–≤ ‚Äî AgroProsper DAO</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="main.css" />
</head>
<body>
  <!-- üîß –ú–µ–Ω—é -->
  <div id="menuContainer"></div>

  <header>
    <h1 id="pageTitle">üèÖ –ì–∞–ª–µ—Ä–µ—è DAO-–±–µ–π–¥–∂—ñ–≤</h1>
    <p>CID: <strong id="cidDisplay">0xAGRO-XXXX</strong></p>
    <p class="role-label" id="roleLabel">–í–∞—à–∞ —Ä–æ–ª—å: –ì—ñ—Å—Ç—å</p>
    <p id="badgeStats">–ë–µ–π–¥–∂—ñ–≤: 0 ¬∑ –†—ñ–≤–µ–Ω—å: Starter</p>
  </header>

  <!-- üß† –§—ñ–ª—å—Ç—Ä–∏ -->
  <section>
    <div class="filter-buttons">
      <button onclick="filterBadges('all')">–í—Å—ñ</button>
      <button onclick="filterBadges('guest')">–ì–æ—Å—Ç—ñ</button>
      <button onclick="filterBadges('agent')">–ê–≥–µ–Ω—Ç–∏</button>
      <button onclick="filterBadges('partner')">–ü–∞—Ä—Ç–Ω–µ—Ä–∏</button>
    </div>
  </section>

  <!-- üèÖ –ì–∞–ª–µ—Ä–µ—è -->
  <section class="badge-grid" id="badgeGallery">
    <!-- –ë–µ–π–¥–∂—ñ –≤—Å—Ç–∞–≤–ª—è—é—Ç—å—Å—è –¥–∏–Ω–∞–º—ñ—á–Ω–æ -->
  </section>

  <!-- üîß –§—É—Ç–µ—Ä -->
  <div id="footerContainer"></div>

  <script>
    // üåê –ú—É–ª—å—Ç–∏–º–æ–≤–Ω—ñ—Å—Ç—å
    const lang = navigator.language.startsWith("pl") ? "pl" :
                 navigator.language.startsWith("en") ? "en" : "uk";
    const t = {
      uk: {
        title: "üèÖ –ì–∞–ª–µ—Ä–µ—è DAO-–±–µ–π–¥–∂—ñ–≤",
        role: "–í–∞—à–∞ —Ä–æ–ª—å",
        stats: "–ë–µ–π–¥–∂—ñ–≤",
        level: "–†—ñ–≤–µ–Ω—å"
      },
      pl: {
        title: "üèÖ Galeria odznak DAO",
        role: "Twoja rola",
        stats: "Odznak",
        level: "Poziom"
      },
      en: {
        title: "üèÖ DAO Badge Gallery",
        role: "Your role",
        stats: "Badges",
        level: "Level"
      }
    };
    const tr = t[lang];
    document.title = tr.title;
    document.getElementById("pageTitle").textContent = tr.title;

    // üß† CID-–ª–æ–≥—ñ–∫–∞
    const cid = localStorage.getItem("cid") || "0xAGRO-GUEST";
    document.getElementById("cidDisplay").textContent = cid;

    let roleClass = "guest", roleName = "–ì—ñ—Å—Ç—å";
    if (cid.includes("AG")) { roleClass = "agent"; roleName = lang === "pl" ? "Agent" : lang === "en" ? "Agent" : "–ê–≥–µ–Ω—Ç"; }
    else if (cid.includes("PA")) { roleClass = "partner"; roleName = lang === "pl" ? "Partner" : lang === "en" ? "Partner" : "–ü–∞—Ä—Ç–Ω–µ—Ä"; }
    else if (cid.includes("AN")) { roleClass = "analyst"; roleName = lang === "pl" ? "Analityk" : lang === "en" ? "Analyst" : "–ê–Ω–∞–ª—ñ—Ç–∏–∫"; }

    document.body.classList.add(roleClass);
    document.getElementById("roleLabel").textContent = `${tr.role}: ${roleName}`;

    // üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
    const badges = JSON.parse(localStorage.getItem("achievements") || "[]");
    const level = localStorage.getItem("agentLevel") || "Starter";
    document.getElementById("badgeStats").textContent = `${tr.stats}: ${badges.length} ¬∑ ${tr.level}: ${level}`;

    // üèÖ –ì–∞–ª–µ—Ä–µ—è –±–µ–π–¥–∂—ñ–≤
    const badgeGallery = document.getElementById("badgeGallery");
    const badgeData = [
      { id: "guest", title: "–ì—ñ—Å—Ç—å DAO", img: "badges/guest.svg", desc: "–û–∑–Ω–∞–π–æ–º–ª–µ–Ω–Ω—è –∑ –ø–ª–∞—Ç—Ñ–æ—Ä–º–æ—é", role: "guest" },
      { id: "agent", title: "–ê–≥–µ–Ω—Ç DAO", img: "badges/agent.svg", desc: "–î–æ—Å—Ç—É–ø –¥–æ –≥–æ–ª–æ—Å—É–≤–∞–Ω–Ω—è —Ç–∞ –∫–≤–µ—Å—Ç—ñ–≤", role: "agent" },
      { id: "partner", title: "–ë—ñ–∑–Ω–µ—Å-–ü–∞—Ä—Ç–Ω–µ—Ä", img: "badges/partner.svg", desc: "–ö–µ—Ä—É–≤–∞–Ω–Ω—è —Å—Ç—É–¥—ñ—è–º–∏ —Ç–∞ —Å—Ü–µ–Ω–∞—Ä—ñ—è–º–∏", role: "partner" },
      { id: "liquor", title: "–¶—É–∫–µ—Ä–æ—á–∫–∞ –∑ –ª—ñ–∫–µ—Ä–æ–º", img: "assets/badges/liquor_candy.svg", desc: "–ó–∞ –∫–≤–µ—Å—Ç ‚Äú–°–æ–ª–æ–¥–∫–∏–π –≤–∏–±—ñ—Ä‚Äù", role: "agent" },
      { id: "moon", title: "Moon Botanist", img: "assets/badges/moon_botanist.svg", desc: "–ó–∞ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—é —á–µ—Ä–µ–∑ CID", role: "guest" },
      { id: "good", title: "Agent of Good", img: "assets/badges/agent_of_good.svg", desc: "–ó–∞ –¥–æ–±—Ä–æ—á–∏–Ω–Ω—É –¥—ñ—é –±–µ–∑ –ø—ñ–∞—Ä—É", role: "agent" }
    ];

    badgeData.forEach(badge => {
      const card = document.createElement("div");
      card.className = "badge-card";
      card.setAttribute("data-role", badge.role);
      card.innerHTML = `
        <img src="${badge.img}" alt="${badge.title}" />
        <h3>${badge.title}</h3>
        <p>${badge.desc}</p>
      `;
      badgeGallery.appendChild(card);
    });

    // üîç –§—ñ–ª—å—Ç—Ä
    function filterBadges(role) {
      const cards = document.querySelectorAll(".badge-card");
      cards.forEach(card => {
        card.style.display = (role === "all" || card.dataset.role === role) ? "block" : "none";
        if (badge.cid) {
  card.innerHTML += `<small>üîó <a href="https://ipfs.io/ipfs/${badge.cid}" target="_blank">IPFS</a></small>`;
}
      });
    }

    // üì¶ –í—Å—Ç–∞–≤–∫–∞ –º–µ–Ω—é —ñ —Ñ—É—Ç–µ—Ä–∞
    fetch("menu.html")
      .then(res => res.text())
      .then(html => document.getElementById("menuContainer").innerHTML = html);

    fetch("footer.html")
      .then(res => res.text())
      .then(html => document.getElementById("footerContainer").innerHTML = html);
      <script src="scripts/badgeSync.js" defer></script>
  </script>
</body>
</html>
