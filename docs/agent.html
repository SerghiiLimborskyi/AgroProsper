<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>üß† –ü–∞–Ω–µ–ª—å –∞–≥–µ–Ω—Ç–∞</title>
  <link rel="stylesheet" href="styles/main.css" />
  <style>
    main {
      padding: 40px 20px;
      max-width: 900px;
      margin: auto;
      text-align: center;
    }
    h1 {
      font-size: 28px;
      color: #00ff99;
      margin-bottom: 20px;
    }
    .agent-loader {
      font-size: 16px;
      color: #ccc;
      text-align: center;
      margin-top: 40px;
    }
    .role-label {
      font-size: 18px;
      color: #00ffcc;
      font-weight: bold;
      margin-bottom: 20px;
    }
    .badge {
      height: 100px;
      margin-bottom: 20px;
    }
  </style>
</head>
<body>
  <div id="menuContainer"></div>
  <main id="daoContent">
    <h1 id="agentTitle">üß† –ü–∞–Ω–µ–ª—å –∞–≥–µ–Ω—Ç–∞</h1>
    <p class="agent-loader" id="agentLoader">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ø–∞–Ω–µ–ª—ñ...</p>
  </main>
  <div id="footerContainer"></div>
  <script src="public/init.js"></script>
  <script>
    const lang = navigator.language.startsWith("pl") ? "pl"
                : navigator.language.startsWith("en") ? "en"
                : "uk";

    const t = {
      uk: {
        title: "üß† –ü–∞–Ω–µ–ª—å –∞–≥–µ–Ω—Ç–∞",
        loading: "–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ø–∞–Ω–µ–ª—ñ...",
        role: "–í–∞—à–∞ —Ä–æ–ª—å:",
        badge: "–í–∞—à –±–µ–π–¥–∂:"
      },
      pl: {
        title: "üß† Panel agenta",
        loading: "≈Åadowanie panelu...",
        role: "Twoja rola:",
        badge: "Tw√≥j badge:"
      },
      en: {
        title: "üß† Agent Panel",
        loading: "Loading panel...",
        role: "Your role:",
        badge: "Your badge:"
      }
    };

    const tr = t[lang];
    document.getElementById("agentTitle").textContent = tr.title;
    document.getElementById("agentLoader").textContent = tr.loading;

    const cid = localStorage.getItem("cid") || "0xAGRO-AG";

    function getRoleByCID(cid) {
      if (cid.includes("AN")) return "–ê–Ω–∞–ª—ñ—Ç–∏–∫ DAO";
      if (cid.includes("PA")) return "–ü–∞—Ä—Ç–Ω–µ—Ä DAO";
      if (cid.includes("AG")) return "–ê–≥–µ–Ω—Ç DAO";
      return "–ì—ñ—Å—Ç—å";
    }

    function getBadgeByCID(cid) {
      if (cid.includes("AN")) return ["media/badge-analyst.png", "–ê–Ω–∞–ª—ñ—Ç–∏–∫"];
      if (cid.includes("PA")) return ["media/badge-partner.png", "–ü–∞—Ä—Ç–Ω–µ—Ä"];
      if (cid.includes("AG")) return ["media/badge-agent.png", "–ê–≥–µ–Ω—Ç"];
      return ["media/badge-nft.png", "–ì—ñ—Å—Ç—å"];
    }

    const [badgeSrc, badgeLabel] = getBadgeByCID(cid);

    fetch("components/agent-panel.html")
      .then(res => res.text())
      .then(html => {
        const container = document.getElementById("daoContent");
        container.innerHTML = `
          <h1>${tr.title}</h1>
          <p class="role-label">${tr.role} ${getRoleByCID(cid)}</p>
          <p>${tr.badge} ${badgeLabel}</p>
          <img class="badge" src="${badgeSrc}" alt="–ë–µ–π–¥–∂ –∞–≥–µ–Ω—Ç–∞" />
          ${html}
        `;
      });
  </script>
</body>
</html>
