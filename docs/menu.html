// menu.js ‚Äî —ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–µ DAO-–º–µ–Ω—é AgroProsper

document.addEventListener("DOMContentLoaded", () => {
  const nav = document.querySelector("nav");
  const toggle = document.querySelector(".menu-toggle");
  const cidBlock = document.querySelector(".cid");

  // üîÅ –ú–æ–±—ñ–ª—å–Ω–µ –º–µ–Ω—é
  if (toggle && nav) {
    toggle.addEventListener("click", () => {
      nav.classList.toggle("active");
    });
  }

  // üß† CID-—ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è
  const cid = localStorage.getItem("cid");
  if (cid && cidBlock) {
    cidBlock.textContent = `CID: ${cid}`;
    document.body.setAttribute("data-role", getRoleFromCID(cid));
  }

  // üéØ DAO-–ø—ñ–¥—Å–≤—ñ—á—É–≤–∞–Ω–Ω—è –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –ø—É–Ω–∫—Ç—É
  const links = document.querySelectorAll("nav a");
  const currentPage = window.location.pathname.split("/").pop();

  links.forEach(link => {
    if (link.getAttribute("href") === currentPage) {
      link.style.color = "#00ff99";
      link.style.fontWeight = "bold";
    }
  });
});

// üîç –í–∏–∑–Ω–∞—á–µ–Ω–Ω—è —Ä–æ–ª—ñ –Ω–∞ –æ—Å–Ω–æ–≤—ñ CID
function getRoleFromCID(cid) {
  if (cid.startsWith("SP-")) return "–°—É–ø–µ—Ä –ü–∞—Ä—Ç–Ω–µ—Ä";
  if (cid.startsWith("DAO-")) return "–ê–≥–µ–Ω—Ç DAO";
  if (cid.startsWith("ETH-")) return "–ï—Ç–∏—á–Ω–∏–π –ö—É—Ä–∞—Ç–æ—Ä";
  return "–ì—ñ—Å—Ç—å";
<div class="avatar-block">
  <img src="media/avatar.png" alt="–ê–≤–∞—Ç–∞—Ä DAO">
  <div class="cid-role" id="cidRole">CID: ...</div>
</div>
}
