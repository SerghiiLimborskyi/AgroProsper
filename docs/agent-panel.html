<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <title>üß† –ü–∞–Ω–µ–ª—å –∞–≥–µ–Ω—Ç–∞ DAO</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="main.css" />
  <link rel="stylesheet" href="styles/badge.css" />
</head>
<body>
  <!-- üîß –ú–µ–Ω—é –≤—Å—Ç–∞–≤–ª—è—î—Ç—å—Å—è –¥–∏–Ω–∞–º—ñ—á–Ω–æ -->
  <div id="menuContainer"></div>

  <header>
    <h1 id="panelTitle">üß† –ü–∞–Ω–µ–ª—å –∞–≥–µ–Ω—Ç–∞ DAO</h1>
    <p>CID: <strong id="cidDisplay">0xAGRO-XXXX</strong></p>
    <p class="role-label" id="roleLabel">–í–∞—à–∞ —Ä–æ–ª—å: –ì—ñ—Å—Ç—å</p>
  </header>

  <section>
    <h2>üèÖ –í–∞—à—ñ –±–µ–π–¥–∂—ñ</h2>
    <div id="badgeContainer"></div>
  </section>

  <section>
    <h2>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
    <p id="questText">–ö–≤–µ—Å—Ç—ñ–≤ –≤–∏–∫–æ–Ω–∞–Ω–æ: <span id="questCount">0</span></p>
    <p id="levelText">–†—ñ–≤–µ–Ω—å: <span id="agentLevel">Starter</span></p>
  </section>

  <!-- üîß –§—É—Ç–µ—Ä –≤—Å—Ç–∞–≤–ª—è—î—Ç—å—Å—è –¥–∏–Ω–∞–º—ñ—á–Ω–æ -->
  <div id="footerContainer"></div>

  <script src="scripts/badgeViewer.js" defer></script>
  <script>
    // üåê –ú—É–ª—å—Ç–∏–º–æ–≤–Ω—ñ—Å—Ç—å
    const lang = navigator.language.startsWith("pl") ? "pl" :
                 navigator.language.startsWith("en") ? "en" : "uk";
    const t = {
      uk: {
        title: "üß† –ü–∞–Ω–µ–ª—å –∞–≥–µ–Ω—Ç–∞ DAO",
        role: "–í–∞—à–∞ —Ä–æ–ª—å",
        quests: "–ö–≤–µ—Å—Ç—ñ–≤ –≤–∏–∫–æ–Ω–∞–Ω–æ",
        level: "–†—ñ–≤–µ–Ω—å"
      },
      pl: {
        title: "üß† Panel agenta DAO",
        role: "Twoja rola",
        quests: "Wykonane zadania",
        level: "Poziom"
      },
      en: {
        title: "üß† Agent Panel DAO",
        role: "Your role",
        quests: "Quests completed",
        level: "Level"
      }
    };
    document.getElementById("panelTitle").textContent = t[lang].title;
    document.getElementById("questText").childNodes[0].textContent = `${t[lang].quests}: `;
    document.getElementById("levelText").childNodes[0].textContent = `${t[lang].level}: `;
    document.getElementById("roleLabel").textContent = `${t[lang].role}: `;

    // üß† CID-–ª–æ–≥—ñ–∫–∞
    const cid = localStorage.getItem("cid") || "0xAGRO-GUEST";
    document.getElementById("cidDisplay").textContent = cid;

    let roleClass = "guest", roleName = "–ì—ñ—Å—Ç—å";
    if (cid.includes("AG")) { roleClass = "agent"; roleName = lang === "pl" ? "Agent" : lang === "en" ? "Agent" : "–ê–≥–µ–Ω—Ç"; }
    else if (cid.includes("PA")) { roleClass = "partner"; roleName = lang === "pl" ? "Partner" : lang === "en" ? "Partner" : "–ü–∞—Ä—Ç–Ω–µ—Ä"; }
    else if (cid.includes("AN")) { roleClass = "analyst"; roleName = lang === "pl" ? "Analityk" : lang === "en" ? "Analyst" : "–ê–Ω–∞–ª—ñ—Ç–∏–∫"; }

    document.body.classList.add(roleClass);
    document.getElementById("roleLabel").textContent += roleName;

    // üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
    const quests = JSON.parse(localStorage.getItem("achievements") || "[]");
    document.getElementById("questCount").textContent = quests.length;
    document.getElementById("agentLevel").textContent = localStorage.getItem("agentLevel") || "Starter";

    // üì¶ –í—Å—Ç–∞–≤–∫–∞ –º–µ–Ω—é —ñ —Ñ—É—Ç–µ—Ä–∞
    fetch("menu.html")
      .then(res => res.text())
      .then(html => document.getElementById("menuContainer").innerHTML = html);

    fetch("footer.html")
      .then(res => res.text())
      .then(html => document.getElementById("footerContainer").innerHTML = html);
  </script>
</body>
</html>
