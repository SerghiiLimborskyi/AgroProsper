<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <title>üéÆ DAO Game</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="../style.css" />
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
  <div id="game-container">
    <h1 id="game-title">üéÆ DAO Game</h1>
    <p><strong>–ñ–∞–Ω—Ä:</strong> <span id="genre">‚è≥</span></p>
    <p><strong>–°–µ—Ç—Ç—ñ–Ω–≥:</strong> <span id="setting">‚è≥</span></p>
    <p><strong>–ú–µ—Ö–∞–Ω—ñ–∫–∞:</strong> <span id="mechanic">‚è≥</span></p>
    <p><strong>–ù–∞–≥–æ—Ä–æ–¥–∞:</strong> <span id="reward">‚è≥</span></p>
    <button id="start-btn">üöÄ –ü–æ—á–∞—Ç–∏ –≥—Ä—É</button>
    <div id="game-output" style="margin-top: 20px;"></div>
  </div>

  <script>
    const tg = window.Telegram.WebApp;
    tg.expand();function escapeHTML(str) {
  return str.replace(/[&<>"']/g, m => ({
    '&': '&amp;',
    '<': '&lt;',
    '>': '&gt;',
    '"': '&quot;',
    "'": '&#39;'
  })[m]);
}
const title = escapeHTML(params.get('title') || 'DAO Game');
const genre = escapeHTML(params.get('genre') || '–°—Ç—Ä–∞—Ç–µ–≥—ñ—è');
const setting = escapeHTML(params.get('setting') || '—Ñ–µ—Ä–º–µ—Ä—Å—å–∫–∏–π DAO-—Å–≤—ñ—Ç');
const mechanic = escapeHTML(params.get('mechanic') || '–∫–µ—Ä—É–π –ø–æ—Å—ñ–≤–∞–º–∏, –ø—Ä–æ–¥–∞–≤–∞–π –≤—Ä–æ–∂–∞–π');
const reward = escapeHTML(params.get('reward') || 'NFT-–±–µ–π–¥–∂ ‚ÄúTop Farmer‚Äù');


    function escapeHTML(str) {
      return str.replace(/[&<>"']/g, m => ({
        '&': '&amp;',
        '<': '&lt;',
        '>': '&gt;',
        '"': '&quot;',
        "'": '&#39;'
      })[m]);
    }

    const params = new URLSearchParams(window.location.search);
    const title = escapeHTML(params.get('title') || 'DAO Game');
    const genre = escapeHTML(params.get('genre') || '–°—Ç—Ä–∞—Ç–µ–≥—ñ—è');
    const setting = escapeHTML(params.get('setting') || '—Ñ–µ—Ä–º–µ—Ä—Å—å–∫–∏–π DAO-—Å–≤—ñ—Ç');
    const mechanic = escapeHTML(params.get('mechanic') || '–∫–µ—Ä—É–π –ø–æ—Å—ñ–≤–∞–º–∏, –ø—Ä–æ–¥–∞–≤–∞–π –≤—Ä–æ–∂–∞–π');
    const reward = escapeHTML(params.get('reward') || 'NFT-–±–µ–π–¥–∂ ‚ÄúTop Farmer‚Äù');

    document.getElementById('game-title').textContent = title;
    document.getElementById('genre').textContent = genre;
    document.getElementById('setting').textContent = setting;
    document.getElementById('mechanic').textContent = mechanic;
    document.getElementById('reward').textContent = reward;

    document.getElementById('start-btn').onclick = () => {
      const output = document.getElementById('game-output');
      output.innerHTML = ''; // –æ—á–∏—Å—Ç–∏—Ç–∏

      const p1 = document.createElement('p');
      p1.textContent = `üîç –í–∏ –ø–æ—á–∏–Ω–∞—î—Ç–µ DAO-–ø—Ä–∏–≥–æ–¥—É –≤ —Å–≤—ñ—Ç—ñ ${setting}`;
      output.appendChild(p1);

      const p2 = document.createElement('p');
      p2.textContent = `üéØ –ó–∞–≤–¥–∞–Ω–Ω—è: ${mechanic}`;
      output.appendChild(p2);

      const p3 = document.createElement('p');
      p3.textContent = `üèÜ –£—Å–ø—ñ—à–Ω–µ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è ‚Äî ${reward}`;
      output.appendChild(p3);
    };
  </script>
</body>
</html>
